#docker #spring 

# 개요

```yml
services:  
  mysql:  
    image: mysql:8.0  
    container_name: ticket-mysql  
    restart: always  
    ports:  
      - "3308:3306"
```

docker-compose.yml 파일에서 외부 서비스를 이용할 때 ports 가 무엇을 의미하는지 살펴보자
___

# `3308:3306`

3308 : 호스트 번호 (외부에서 접근할 수 있는 포트)
3306 : 컨테이너 번호 (컨테이너 내부 포트)

-> 외부에서 https://localhost:3308 으로 접속하면 docker 가 이 요청을 서비스 내의 컨테이너 번호 3306 으로 전달한다.
- **3308 의 열쇠로 3306의 자물쇠를 여는 것과 마찬가지**

**🤷🏻 서버(호스트)는 하나인데 왜 호스트 번호를 서비스마다 다르게 하는거지??**
: 한 IP 주소에 여러 어플리케이션을 동시에 띄우기 위해서
: 호스트 번호가 중복되면 안됨

___

# `host.docker.internal:XXXX `

`host.docker.intenal:8086` : 컨테이너를 실행하는 호스트 PC(내 컴터)의 IP 주소
	-> 현재  docker 를 내 로컬 컴퓨터에 띄우고 있는 상태이므로 host.docker.internal 로 해야된다.
	-> 내 컴퓨터의 8086 포트와 influxdb 컨테이너의 8086 포트가 연결되는 것이다.
	
`influxdb:8086`:  docker 를 로컬 환경이 아닌 AWS 에 배포 시 influxdb 컨테이너에 접속

___
