#database #mysql 

# 개요

게시물 종류
1. 사용자가 즐겨찾기 추가한 위스키의 게시글에 대한 피드
2. 사용자가 팔로잉한 사용자가 게시한 게시글에 대한 피드

두개의 피드 모두 최신순, 오래된순, 인기순, 조회순 정렬 가능

## 사용자가 즐겨찾기 추가한 위스키의 게시글에 대한 피드

```sql
SELECT * FROM board b 
JOIN user_whisky_favorites f 
ON f.whisky_id = b.whisky_id 
WHERE f.user_id = :userId 
AND (커서 조건) ORDER BY (정렬 조건)
```

### 사용자의 즐겨찾기 위스키 엔티티
- 먼저 `userId`를 이용해서 사용자의 위스키 목록들을 뽑아낸다.
- 뽑아낸 위스키 목록들 중에서 Board 테이블과 **조인**하기 위한 `whiskyId` 로 인덱스를 걸어준다.

**Index** : {`userId, whiskyId}`


##### 🔥 사용자가 즐겨찾기 할때마다 쓰기작업(UPDATE)이 일어날텐데 이렇게 인덱스를 걸어줘도 될까?

비용측면에서 생각해보자,
사용자가 즐겨찾기 추가한 횟수(`UPDATE`) < 데이터 조회 횟수 일것이다.
즉, 읽기 빈도가 쓰기 빈도보다 압도적으로 높기 때문에 훨씬 이득
