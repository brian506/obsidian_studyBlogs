분산 아키텍처로서 Kafka 클러스터는 단일 머신으로 구성되기 보다 여러 머신을 붙여서 사용하는 것이 바람직하다.
이때 분산 환경을 관리하는 플랫폼인 Apache Zookeeper 가 쓰인다.

Zookeeper 는 분산 시스템의 일부분이기 때문에 동작을 멈춘다면 분산 시스템이 멈출수도 있다. 그래서 안정성을 확보하기 위해 클러스터로 구축한다.

클러스터는 **홀수로** 구축한다.
어떤 서버에 문제가 생겼을 경우, 과반수 이상의 데이터를 기준으로 일관성을 맞춘다.
살아있는 노드가 과반수 이상이면 지속적인 서비스를 제공한다.

이제 Kafka 클러스터와 Zookeeper 가 어떻게 연동되는지 살펴보자.
Zookeeper 는 Kafka 클러스터의 구성 정보, 브로커 상태, Topic 파티션 배치 등을 관리한다. 
브로커는 Zookeeper에 자신의 상태를 등록하고,
클러스터의 모든 브로커 간의 정보를 공유하여 클러스터를 관리한다.
###  ✅ 1. 클러스터 메타데이터 관리

Zookeeper 는 클러스터의 구성 정보를 저장하고 관리한다.
클러스터에 속한 브로커들의 정보, Topic 의 파티션 정보, Topic 의 구성 설정 등의 메타 데이터를 저장하여 클러스터의 상태를 유지한다.

### ✅ 2. 리더 선출

Kafka Topic 의 파티션은 여러 개의 브로커에 복제될 수 있다. 
Zookeeper 는 파티션의 리더를 선출하고, 해당 파티션의 리더와 팔로워 간의 동기화를 관리한다.

### ✅ 3. 브로커 상태 관리

브로커는 Zookeeper에 자신의 상태를 등록한다. 이를 통해 브로커의 살아있음 상태와 연결된 Topic 파티션들의 리더와 팔로워 상태를 지속적으로 감시한다.

### ✅ 4. 동적 Topic 파티션 관리

Kafka의 Topic 파티션 수를 동적으로 조절할 수 있다.
Zookeeper 를 통해 파티션 수를 변경하면 클러스터에서 해당 파티션들을 적절히 재배치한다.

### ✅ 5. 클러스터 리더 인식

Kafka 클러스터에서 리더가 변경되거나, 브로커가 추가/삭제되면 해당 정보를 Zookeeper 를 통해 클러스터의 모든 브로커에 전달하여 업데이트한다.

